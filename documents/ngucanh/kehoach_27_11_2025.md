# Káº¿ hoáº¡ch ngÃ y 27/11/2025

## Pháº£n há»“i tá»« ChuyÃªn gia
âœ… **APPROVED** - CÃ´ng viá»‡c ngÃ y 26/11 Ä‘Ã£ Ä‘Æ°á»£c phÃª duyá»‡t

## Nhiá»‡m vá»¥ hÃ´m nay (Theo thá»© tá»± Æ°u tiÃªn)

### ğŸ”´ Æ¯u tiÃªn 1: WebSocket Auto-reconnect (CRITICAL)

**Má»¥c tiÃªu:** Äáº£m báº£o há»‡ thá»‘ng tá»± Ä‘á»™ng káº¿t ná»‘i láº¡i khi máº¥t máº¡ng

**Tasks:**
1. Cáº­p nháº­t `useMarketData.ts` - thÃªm reconnection logic
2. Cáº­p nháº­t `ConnectionStatus.tsx` - hiá»ƒn thá»‹ tráº¡ng thÃ¡i Disconnected/Reconnecting
3. Test: Simulate network failure, verify Live indicator Red â†’ Green

**Tech spec:**
- Reconnect interval: 5 giÃ¢y
- Max retries: unlimited (keep trying)
- Visual feedback: "Disconnected" â†’ "Reconnecting..." â†’ "Live"

---

### ğŸŸ¡ Æ¯u tiÃªn 2: Chart Markers (Last 50 trades)

**Má»¥c tiÃªu:** Hiá»ƒn thá»‹ mÅ©i tÃªn Buy/Sell trÃªn chart cho 50 trades gáº§n nháº¥t

**Tasks:**
1. Fetch last 50 trades tá»« `/trades/history?limit=50`
2. Convert trades â†’ markers format
3. Sá»­ dá»¥ng `candleSeries.setMarkers()` API
4. MÅ©i tÃªn xanh â–² (BUY) / Ä‘á» â–¼ (SELL)

**Tech spec:**
- Chá»‰ load 50 trades (performance)
- Marker position: belowBar (BUY), aboveBar (SELL)
- Refresh khi cÃ³ trade má»›i

---

### ğŸŸ¢ Æ¯u tiÃªn 3: Equity Curve Chart

**Má»¥c tiÃªu:** Visualize equity theo thá»i gian Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ stability

**Tasks:**
1. Backend: API endpoint `/trades/equity-history`
2. Frontend: Line chart trong PerformanceDashboard
3. Hiá»ƒn thá»‹: Balance + Unrealized PnL theo thá»i gian

**Tech spec:**
- Data points: Má»—i trade closed = 1 point
- X-axis: Time
- Y-axis: Equity value
- Sá»­ dá»¥ng lightweight-charts LineSeries

---

## Files cáº§n sá»­a

| File | Thay Ä‘á»•i |
|------|----------|
| `frontend/src/hooks/useMarketData.ts` | +Reconnection logic |
| `frontend/src/components/ConnectionStatus.tsx` | +Status display |
| `frontend/src/components/CandleChart.tsx` | +Trade markers |
| `frontend/src/components/PerformanceDashboard.tsx` | +Equity curve |
| `src/api/routers/trades.py` | +/trades/equity-history |

---

## Ghi chÃº
- Inline styles OK (temporary fix)
- Focus on Logic & Data Visualization
- Test ká»¹ WebSocket reconnection
