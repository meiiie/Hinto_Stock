# Báo cáo đề xuất kế hoạch - 26/11/2025

## I. Tình trạng hiện tại

### A. Các fix đã thực hiện hôm qua (25/11)

| # | Vấn đề | Giải pháp | File sửa | Trạng thái |
|---|--------|-----------|----------|------------|
| 1 | Change percent hiển thị "---" | Tự tính `((close-open)/open)*100` | `useMarketData.ts` | ✅ Done |
| 2 | Layout Overflow (chart bị cắt) | `calc(100vh - 48px)` + dynamic height | `App.tsx`, `CandleChart.tsx` | ✅ Done |
| 3 | Fullscreen Chart | Toggle button + keyboard shortcuts | `App.tsx` | ✅ Done |
| 4 | Nến bay (Indicator Lag) | Trim 50 cây nến đầu tiên | `CandleChart.tsx` | ✅ Done |

**Cần xác nhận từ chuyên gia:** Các fix trên đã hoạt động đúng chưa?

---

### B. Tình trạng Paper Trading

#### Backend (Python) - ĐÃ HOÀN THÀNH ✅
```
src/application/services/paper_trading_service.py
├── get_wallet_balance()      ✅
├── get_positions()           ✅
├── calculate_unrealized_pnl() ✅
├── on_signal_received()      ✅ (Auto execute từ signal)
├── close_position()          ✅
├── process_market_data()     ✅ (SL/TP/Trailing)
├── get_portfolio()           ✅
├── get_trade_history()       ✅ (Paginated)
├── calculate_performance()   ✅
├── get_settings()            ✅
├── update_settings()         ✅
└── reset_account()           ✅
```

#### API Endpoints - ĐÃ HOÀN THÀNH ✅
```
GET  /trades/portfolio     - Lấy portfolio
GET  /trades/history       - Lịch sử giao dịch (paginated)
GET  /trades/performance   - Performance metrics
POST /trades/close/{id}    - Đóng vị thế
POST /trades/reset         - Reset account
GET  /settings             - Lấy settings
PUT  /settings             - Cập nhật settings
```

#### Frontend (React) - CẦN BỔ SUNG ⚠️

| Component | Trạng thái | Ghi chú |
|-----------|------------|---------|
| `Portfolio.tsx` | ✅ Done | Hiển thị balance, positions, close button |
| `TradeHistory.tsx` | ✅ Done | Pagination, exit reason badges |
| `PerformanceDashboard.tsx` | ⚠️ Cần kiểm tra | Chưa verify hoạt động |
| `Settings.tsx` | ⚠️ Cần kiểm tra | Chưa verify hoạt động |
| **Manual Trade Panel** | ❌ Chưa có | Cần thêm UI đặt lệnh thủ công |
| **Reset Account Button** | ❌ Chưa có | Cần thêm vào Settings |

---

## II. Đề xuất kế hoạch hôm nay

### Phương án A: Tập trung hoàn thiện Paper Trading UI (Khuyến nghị)

**Ưu tiên 1: Thêm Manual Trade Panel**
- Vị trí: Sidebar phải hoặc Bottom Panel
- Chức năng:
  - Input: Entry Price, Stop Loss, Take Profit
  - Buttons: BUY / SELL
  - Auto-calculate: Position Size dựa trên Risk %
- Thời gian ước tính: 2-3 giờ

**Ưu tiên 2: Thêm Reset Account Button**
- Vị trí: Settings page hoặc Portfolio page
- Chức năng: Gọi `POST /trades/reset`
- Thời gian ước tính: 30 phút

**Ưu tiên 3: Verify Performance Dashboard**
- Kiểm tra API `/trades/performance` hoạt động
- Verify UI hiển thị đúng metrics
- Thời gian ước tính: 1 giờ

### Phương án B: Tập trung Signal Enhancement

- Review signal generation logic
- Test Entry/SL/TP lines hiển thị trên chart
- Verify confidence calculation
- Thời gian ước tính: 3-4 giờ

### Phương án C: UI Polish & Testing

- Test responsive trên các kích thước màn hình
- Verify dark theme consistency
- Performance optimization
- Thời gian ước tính: 2-3 giờ

---

## III. Câu hỏi cho chuyên gia

1. **Các fix hôm qua đã OK chưa?** (Layout, Fullscreen, Indicator Lag)

2. **Ưu tiên hôm nay nên là gì?**
   - [ ] A: Hoàn thiện Paper Trading UI
   - [ ] B: Signal Enhancement
   - [ ] C: UI Polish & Testing
   - [ ] Khác: _______________

3. **Manual Trade Panel nên đặt ở đâu?**
   - [ ] Sidebar phải (thay thế Strategy Monitor)
   - [ ] Bottom Panel (tab mới)
   - [ ] Modal/Popup khi click nút Trade
   - [ ] Không cần - chỉ dùng auto signal

4. **Có cần thêm tính năng nào khác không?**

---

## IV. Ghi chú kỹ thuật

### Files cần sửa nếu chọn Phương án A:
```
frontend/src/components/
├── TradingPanel.tsx      (MỚI - Manual trade UI)
├── Settings.tsx          (Thêm Reset button)
├── PerformanceDashboard.tsx (Verify)
└── App.tsx               (Integrate TradingPanel)

src/api/routers/
└── trades.py             (Thêm endpoint execute manual trade nếu cần)
```

### Dependencies:
- Backend API đã sẵn sàng
- WebSocket connection đang hoạt động
- Theme system đã có (`THEME` object)

---

**Ngày tạo:** 26/11/2025  
**Người tạo:** AI Assistant  
**Chờ phản hồi từ:** Chuyên gia đánh giá
